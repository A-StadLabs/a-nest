<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/firebase-element/firebase-element.html">
<link rel="import" href="../../bower_components/core-icon-button/core-icon-button.html">

<link rel="import" href="../../bower_components/core-overlay/core-overlay.html">

<link rel="import" href="../aos-apersoon/aos-apersoon.html">
<link rel="import" href="../aos-aprofiel/aos-aprofiel.html">
<link rel="import" href="../aos-kind/aos-kind.html">
<link rel="import" href="../aos-akaart/aos-akaart.html">
<link rel="import" href="../aos-appartement/aos-appartement.html">
<link rel="import" href="../aos-aprofielcollectie/aos-aprofielcollectie.html">
<link rel="import" href="../aos-bouwgrond/aos-bouwgrond.html">
<link rel="import" href="../aos-eid/aos-eid.html">
<link rel="import" href="../aos-gebeurtenis/aos-gebeurtenis.html">
<link rel="import" href="../aos-huis/aos-huis.html">
<link rel="import" href="../aos-school/aos-school.html">
<link rel="import" href="../aos-stadsmedewerker/aos-stadsmedewerker.html">
<link rel="import" href="../aos-text/aos-text.html">
<link rel="import" href="../aos-vereniging/aos-vereniging.html">
<link rel="import" href="../aos-werk/aos-werk.html">
<link rel="import" href="../aos-text/aos-text.html">

<link rel="import" href="../aos-edit/aos-edit.html">

<polymer-element name="aos-render" attributes="type userid mode instance">

  <template>

    <link rel="stylesheet" href="aos-render.css" />

    <firebase-element location="https://blazing-fire-6426.firebaseio.com/eobjects/things/{{type}}/" data="{{data}}" keys="{{keys}}" id="fbeobjects" on-data-change="{{handleRepsonse}}" log></firebase-element>

<<<<<<< Updated upstream
    <div class="objectje">
        <template if="{{ data.naam == 'A-Persoon' }}">
            <div class="renderings"  on-tap="{{selectitem}}">
                <aos-apersoon type="{{type}}" userid="{{userid}}" mode="{{mode}}" instance="{{instance}}"></aos-apersoon>
            </div>
        </template>
        <template if="{{ data.naam == 'A-Profiel' }}">
            <div class="renderings"  on-tap="{{selectitem}}">
                <aos-aprofiel type="{{type}}" userid="{{userid}}" mode="{{mode}}" instance="{{instance}}"></aos-aprofiel>
        </div>
=======

   


    <div class="objectje">

    {{data.naam}}

        <template if="{{ data.naam == 'A-Persoon' }}">
         <div class="renderings"  on-tap="{{selectitem}}">
            <aos-apersoon type="{{type}}" userid="{{userid}}" mode="{{mode}}" instance="{{instance}}"></aos-apersoon>
         </div>
        </template>
        <template if="{{ data.naam == 'A-Profiel' }}">
         <div class="renderings"  on-tap="{{selectitem}}">
            <aos-aprofiel type="{{type}}" userid="{{userid}}" mode="{{mode}}" instance="{{instance}}"></aos-aprofiel>
         </div>
>>>>>>> Stashed changes
        </template>
        <template if="{{ data.naam == 'kind' }}">
         <div class="renderings"  on-tap="{{selectitem}}">
            <aos-kind type="{{type}}" userid="{{userid}}" mode="{{mode}}" instance="{{instance}}"></aos-kind>
         </div>
        </template>
        <template if="{{ data.naam == 'huis' }}">
         <div class="renderings"  on-tap="{{selectitem}}">
            <aos-huis type="{{type}}" userid="{{userid}}" mode="{{mode}}" instance="{{instance}}"></aos-huis>
         </div>
        </template>
        <template if="{{ data.naam == 'appartement' }}">
         <div class="renderings"  on-tap="{{selectitem}}">
            <aos-appartement type="{{type}}" userid="{{userid}}" mode="{{mode}}" instance="{{instance}}"></aos-appartement>
         </div>

        </template>
        <template if="{{ data.naam == 'A-Kaart' }}">
        <div class="renderings"  on-tap="{{selectitem}}">
            <aos-akaart type="{{type}}" userid="{{userid}}" mode="{{mode}}" instance="{{instance}}"></aos-akaart>
            </div>
        </template>
        <template if="{{ data.naam == 'Gebeurtenis' }}">
        <div class="renderings"  on-tap="{{selectitem}}">
            <aos-gebeurtenis type="{{type}}" userid="{{userid}}" mode="{{mode}}" instance="{{instance}}"></aos-gebeurtenis>
            </div>
        </template>
        <template if="{{ data.naam == 'Vereniging' }}">
        <div class="renderings"  on-tap="{{selectitem}}">
            <aos-vereniging type="{{type}}" userid="{{userid}}" mode="{{mode}}" instance="{{instance}}"></aos-vereniging>
            </div>
        </template>
        <template if="{{ data.naam == 'stadsmedewerker' }}">
        <div class="renderings"  on-tap="{{selectitem}}">
            <aos-stadsmedewerker type="{{type}}" userid="{{userid}}" mode="{{mode}}" instance="{{instance}}"></aos-stadsmedewerker>
            </div>
        </template>
        <template if="{{ data.naam == 'eID' }}">
        <div class="renderings"  on-tap="{{selectitem}}">
            <aos-eid type="{{type}}" userid="{{userid}}" mode="{{mode}}" instance="{{instance}}"></aos-eid>
            </div>
        </template>
        <template if="{{ data.naam == 'werk' }}">
        <div class="renderings"  on-tap="{{selectitem}}">
            <aos-werk type="{{type}}" userid="{{userid}}" mode="{{mode}}" instance="{{instance}}"></aos-werk>
            </div>
        </template>
        <template if="{{ data.naam == 'vrienden' }}">
        <div class="renderings"  on-tap="{{selectitem}}">
            <aos-aprofielcollectie type="{{type}}" userid="{{userid}}" mode="{{mode}}" instance="{{instance}}"></aos-aprofielcollectie>
            </div>
        </template>
        <template if="{{ data.naam == 'school' }}">
        <div class="renderings"  on-tap="{{selectitem}}">
            <aos-school type="{{type}}" userid="{{userid}}" mode="{{mode}}" instance="{{instance}}"></aos-school>
            </div>
        </template>
        <template if="{{ mode == 'parent' }}">

        <div hidden?="{{editmode}}">
            <button class="btn" on-tap="{{toggleEdit}}">
                <svg version="1.1" id="Laag_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                     width="30px" height="30px" viewBox="0 0 30 30" enable-background="new 0 0 30 30" xml:space="preserve">
                <path d="M14.942,29.084c-3.74,0-7.255-1.456-9.899-4.102c-2.645-2.644-4.102-6.16-4.102-9.898
                    S2.398,7.83,5.043,5.185c2.644-2.645,6.16-4.101,9.899-4.101c3.74,0,7.254,1.457,9.899,4.101c2.646,2.645,4.101,6.16,4.101,9.899
                    c0,3.739-1.455,7.255-4.101,9.898C22.197,27.628,18.682,29.084,14.942,29.084z M14.942,2.158c-3.452,0-6.699,1.344-9.14,3.786
                    c-2.441,2.441-3.786,5.688-3.786,9.14c0,3.452,1.345,6.699,3.786,9.141c2.441,2.44,5.688,3.786,9.14,3.786
                    c3.452,0,6.699-1.343,9.14-3.786c2.442-2.441,3.786-5.688,3.786-9.141c0-3.453-1.344-6.699-3.786-9.14
                    C21.64,3.501,18.396,2.158,14.942,2.158z"/>
                <path d="M12.118,19.947c-0.628-0.397-1.281-0.702-1.935-0.919L9.954,23.41l3.811-2.117
                    C13.293,20.797,12.74,20.342,12.118,19.947z"/>
                <path d="M19.951,7.59c-0.997-0.633-1.981-0.835-1.981-0.835l-6.946,10.941c0.659,0.238,1.305,0.556,1.922,0.946
                    c0.612,0.386,1.17,0.832,1.665,1.32L21.553,9.03C21.552,9.028,20.948,8.223,19.951,7.59z"/>
                </svg>
            </button>
        </div>

        <aos-edit id="editor" opened="{{editmode}}" userid="{{userid}}" value="{{value}}" type="{{type}}" instance="{{instance}}" flex></aos-edit>   


    </template>
    </div>


</template>
<script>
    Polymer({
        ready: function(){
            this.openDial = false;   
<<<<<<< Updated upstream
            var that = this;
=======

            var that = this;

>>>>>>> Stashed changes
            this.$.editor.addEventListener('cancel', function(){
                that.toggleEdit();
            });          
    	},

        selectitem: function(e, detail, sender){
          this.fire('item-select', {msg: this.type, instance: this.instance});
        },

        useridChanged: function(){
            //this.typeChanged();
        },

<<<<<<< Updated upstream
<<<<<<< HEAD
        toggleEdit: function(){
            console.log('edit mode: ', this.editmode);
            this.editmode = !this.editmode;
        },
=======
    	typeChanged: function(){
    		var that = this;
        	var key = this.type;

        	var getItem = new Firebase("https://blazing-fire-6426.firebaseio.com/eobjects/things/"+key+"/");
        	var respItem = getItem.once('value', function(snap){
            	console.log(snap.val());
            	that.item = snap.val();
                //that.instance = snap.key();
          	});

            this.getMagnets()
    	},


    	getMagnets: function(){
    		var key = this.type;
    		var getMagnets = new Firebase("https://blazing-fire-6426.firebaseio.com/eobjects/things/"+key+"/children/");
    		var objectMagnets = [];
>>>>>>> FETCH_HEAD

        handleRepsonse: function(){
            console.log('getting the kids: ', this.keys, ' getting the kids data: ', this.data);
            this.item = this.data;
        }

    	// typeChanged: function(){
    	// 	var that = this;
     //    	var key = this.type;

     //    	var getItem = new Firebase("https://blazing-fire-6426.firebaseio.com/eobjects/things/"+key+"/");
     //    	var respItem = getItem.once('value', function(snap){
     //        	console.log('item gevonden: ',snap.val());
     //        	that.item = snap.val();
     //            //that.instance = snap.key();
     //      	});

=======
      toggleEdit: function(){
        console.log('edit mode: ', this.editmode);
        this.editmode = !this.editmode;
      },

    	// typeChanged: function(){
    	// 	var that = this;
     //    	var key = this.type;

     //    	var getItem = new Firebase("https://blazing-fire-6426.firebaseio.com/eobjects/things/"+key+"/");
     //    	var respItem = getItem.once('value', function(snap){
     //        	console.log('item gevonden: ',snap.val());
     //        	that.item = snap.val();
     //            //that.instance = snap.key();
     //      	});

>>>>>>> Stashed changes
     //        this.getMagnets()
    	// },




    });
</script>
</polymer-element>