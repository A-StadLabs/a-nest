<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/core-ajax/core-ajax.html">
<link rel="import" href="../../bower_components/juicy-tile-list/src/juicy-tile-list.html">
<link rel="import" href="../aos-artikel/aos-artikel.html">

<polymer-element name="aos-homenieuws" attributes="">
  <template>
    <link rel="stylesheet" href="aos-homenieuws.css">



<div id="container" horizontal layout>
<core-ajax 
url="/homefeed"
method="GET" 
auto 
handleAs="json" 
response="{{resultaat}}"
on-core-response="{{handleResponse}}" 
>

</core-ajax>
<!-- <juicy-tile-list setup="{{setup}}" gap="20" id="jlist"> 
  <template if="{{tips}}">
  <div class="tip">
    <div class="container">
    <core-icon-button icon="close" on-tap="{{hideTips}}"><small>niet meer weergeven</small></core-icon-button>
    <h3>Wist je dat je dit startscherm kan personaliseren?</h3>
    <core-icon-button icon="arrow-forward">Ga naar mijn instellingen</core-icon-button>
    </div>
  </div>
  </template> -->


<juicy-tile-list setup="{{setup}}" id="jlist"> 
<template repeat="{{a in resultaat.data}}">
    <aos-artikel object="{{a}}" mode="short" class="item" id="artikel"></aos-artikel>
  </template>
  </juicy-tile-list>




<!-- </juicy-tile-list> -->


<!--   <img class="foto" src="https://assets.antwerpen.be/srv/assets/api/image/74f7a525-eef8-44b6-81be-f0e8ba12fdc7/cov%20er%20A-Winterportretten-40.jpg" width="auto"> -->


<!-- <div vertical layout start id="leftcolumn">
  <div id="artikelMEDIUM">
    <h1> Medium // </h1>
  </div>


  <div id="artikelSMALL">
    <h1> Small // </h1>
  </div>

  <div id="artikelSMALL">
    <h1> Small // </h1>
  </div>

</div>


<div id="rightcolumn">

  <div id="artikelLARGE">
    <h1> Large // </h1>
  </div>

</div>



</div> -->

  </template>
  <script>
    (function () {
      'use strict';

      Polymer({
      ready: function() {
       
        this.tips = true;

        console.log('Homescreen app loaded.');

        var i = 0;
        var items = [];
        this.setup = {width: '100%', gutter: 20, items:items};
        
        document.addEventListener('addToFeed', function(e){
            items.push({index:i, priority:0.9, width: 350, heightAuto: true});
            this.setup = { gutter: 20, items:items};
            i++;
            console.log(JSON.stringify(this.setup));

        });
        var that = this;
        setTimeout(function(){ that.$.jlist.refresh(); }, 2000);


        

        },

        hideTips: function(){
        //var that = this;
        console.log('wtf?');
        this.tips = false;
        this.$.jlist.refresh();
      },

      handleResponse: function(){
        console.log('response changed');
      },

      setupChanged: function(){
        console.log('setup changed');
      }      });

    })();
  </script>
</polymer-element>
