<link rel="import" href="../../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../../elements/a-avatar/a-avatar.html">
<link rel="import" href="../../../../bower_components/core-ajax/core-ajax.html">
<link rel="import" href="../../../../elements/aos-globals/aos-globals.html">

<polymer-element name="a-profiel" attributes="">
  <template>
    <link rel="stylesheet" href="a-profiel.css" />
	
	<aos-globals values="{{globals}}"></aos-globals>

    <core-toolbar>
		<core-icon-button icon="arrow-back" on-tap="{{goHome}}"></core-icon-button>
		<span flex></span>
	</core-toolbar>
	<div vertical layout center>
		<a-avatar user="{{gsm}}" avatar="{{avatar}}"></a-avatar>
	</div>
	
	<div>
		<template repeat="{{i in snitten}}">
			<img src="{{i.src}}" on-tap="{{selectSnit}}" width="80" height="105">
		</template>
	</div>
	
	<div>
		<template repeat="{{i in gezichten}}">
			<img src="{{i.src}}" on-tap="{{selectGezicht}}" width="80" height="105">
		</template>
	</div>

	<div>
		<template repeat="{{i in oogaccs}}">
			<img src="{{i.src}}" on-tap="{{selectOogacc}}" width="80" height="105">
		</template>
	</div>

	<div>
		<template repeat="{{i in baarden}}">
			<img src="{{i.src}}" on-tap="{{selectBaard}}" width="80" height="105">
		</template>
	</div>

	<div>
		<template repeat="{{i in snorren}}">
			<img src="{{i.src}}" on-tap="{{selectSnor}}" width="80" height="105">
		</template>
	</div>

</template>
<script>
    Polymer({
    	goHome: function(){
    		this.fire("router-go", { naarwaar: "/home" });
    	},

    	handleResponseCheck: function(){
        console.log(this.responseCheck);
        if(this.responseCheck.userstatus!='E'){
          this.user = true;
          this.gsm = this.responseCheck.gsm;
          this.fire("show-toast", { bericht: "Aangemeld" });
      	} else {
      	  this.fire("show-toast", { bericht: "Niet aangemeld" });
      	  this.fire("router-go", {naarwaar: "/"});
      	}
      console.log(this.user, this.gsm);
    },

    	ready: function(){

            //console.log(JSON.stringify(this.globals));

    		var gezichten = [];
    		var snitten = [];
    		var snorren = [];
    		var baarden = [];
    		var oogaccs = [];

    		var that = this;

    		var getBodyft = new Firebase("https://blazing-fire-6426.firebaseio.com/profielimgs/");
    		getBodyft.on("child_added", function(snapshot){
    			//console.log(snapshot.val());
    			switch (snapshot.val().item){
    				case "gezicht":
    					gezichten.push({"item": snapshot.val().item, "src": snapshot.val().url});
    					break;
    				case "snit":
    					snitten.push({"item": snapshot.val().item, "src": snapshot.val().url});
    					break;
    				case "baard":
    					baarden.push({"item": snapshot.val().item, "src": snapshot.val().url});
    					break;
    				case "snor":
    					snorren.push({"item": snapshot.val().item, "src": snapshot.val().url});
    					break;
    				case "oogacc":
    					oogaccs.push({"item": snapshot.val().item, "src": snapshot.val().url});
    					break;
    			};

    			that.gezichten = gezichten;
    			that.snorren = snorren;
    			that.baarden = baarden;
    			that.oogaccs = oogaccs;
    			that.snitten = snitten;
    		});

    	},

    	selectSnit: function(e){
    		this.avatar.snit = e.target.getAttribute('src');
    	},

    	selectGezicht: function(e){
            console.log('set gezicht');
    		this.avatar.gezicht = e.target.getAttribute('src');
    	},

    	selectOogacc: function(e){
    		this.avatar.oogacc = e.target.getAttribute('src');
    	},

    	selectBaard: function(e){
    		this.avatar.baard = e.target.getAttribute('src');
    	},

    	selectSnor: function(e){
    		this.avatar.snor = e.target.getAttribute('src');
    	}

    	

    });

</script>
</polymer-element>