<link rel="import" href="../../../../bower_components/polymer/polymer.html">
<link rel="import" href="../time-ago/src/time-ago.html">

<polymer-element name="chat-convitem" attributes="key avatar with lastpost">

  <template>

    <link rel="stylesheet" href="chat-convitem.css" />

    <div class="chatlistitem" horizontal layout center start-justified conversation="{{k}}" on-tap="{{select}}">
      <img class="chatavatar" src="{{avatar}}">
      <div vertical layout start start-justified>
      <p>{{with}}</p>
      <time-ago datetime="{{lastpost}}" refresh delay="1000"></time-ago>
    </div>
<!--       <small>{{lastpost}}</small> -->
    </div>

  </template>

  <script>

    Polymer({

      select: function(){
        //console.log(this.user.id);
        this.fire('conv-select', { "conversation": this.key });
      },

      ready: function() {
      	//console.log('Knooppunt app loaded.'); 
      },

      lastpostChanged: function(){
        console.log('Eikeltjes rapen! ', this.lastpost);
      }
      

    });

  </script>

</polymer-element>
