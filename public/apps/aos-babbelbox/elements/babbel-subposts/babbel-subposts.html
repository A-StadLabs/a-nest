
<link rel="import" href="../../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../../bower_components/firebase-element/firebase-element.html">
<link rel="import" href="../babbel-babbel/babbel-babbel.html">
<link rel="import" href="../babbel-postcomment/postcomment-babbel.html">

<polymer-element name="babbel-subposts" attributes="mother">

  <template>

<firebase-element id="FBanswer" location="https://blazing-fire-6426.firebaseio.com/babbelbox/" orderByChild="mother" equalTo="{{mother}}" data="{{answerdata}}" keys="{{answerkeys}}" id="fbBabbelboxanswer" on-data-change="{{handleResponse}}" log></firebase-element>
<babbel-postcomment op="0" tags="child" mother="{{mother}}"></babbel-postcomment>
<template repeat="{{l in answerkeys}}">
 	<babbel-babbel key="{{l}}" object="{{answerdata[l]}}" mode="child" childOf="{{mother}}"></babbel-babbel>
</template>


</template>
<script>
Polymer({

     ready: function() {

      	console.log('Babbelbox entry loaded.'); 

    },

     handleResponse: function(){
        var childdata = [];
        var keys = this.answerkeys;
        
        for (var i = keys.length - 1; i >= 0; i--) {
          console.log(this.data[keys[i]]);
          childdata.push(this.data[keys[i]]);
        };
        this.childdata = childdata;
    }


    });
</script>
</polymer-element>