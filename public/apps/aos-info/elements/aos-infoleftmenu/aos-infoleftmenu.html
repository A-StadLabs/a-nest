<link rel="import" href="../../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../../bower_components/firebase-element/firebase-element.html">
<link rel="import" href="../../../../bower_components/core-animated-pages/transitions/slide-from-right.html">
<link rel="import" href="../../../../bower_components/core-animated-pages/core-animated-pages.html">

<polymer-element name="aos-infoleftmenu" attributes="selectedCat selectedTitle subCat subKey">
  <template>
    <link rel="stylesheet" href="aos-infoleftmenu.css">
      <div id="leftmenu">
        <firebase-element location="https://blazing-fire-6426.firebaseio.com/infocenter/{{selectedCat}}/subcategories/" data="{{subdata}}" keys="{{subkeys}}" on-data-change="{{handleResponse}}" log></firebase-element>
              <small on-tap="{{toNext}}"> naar overzicht</small>

        <h2>{{selectedTitle}}</h2>
      </div> 
      <div id="leftmenu2">
        <core-animated-pages id="subcatscenes" transitions="slide-from-right">
        <section>
        <core-selector id="catselector" selected="{{selected}}" valueattr="label" on-core-activate="{{cattapped}}">
        <template repeat="{{sk in subkeys}}">
          <div label="{{subdata[sk].subtitel}}" key="{{sk}}" class="subcats">{{subdata[sk].subtitel}}</div>
        </template>
        </core-selector>
          <template bind id="addinfofiche">
          <div vertical layout center class="addbtn" on-tap="{{openAddSubCat}}"><h4>Een subcategorie toevoegen</h4></div>
          <core-overlay layered backdrop id="suboverlay">
          <aos-addinfosub selectedCat="{{selectedCat}}" subKey="{{subKey}}"></aos-addinfosub>
          </core-overlay>
        </template>
        </section>

        <section>
          <div id="subcat" horizontal layout center> <img id="bckbtn" on-tap="{{toCatMenu}}" src="../../images/back.svg">{{subCat}}
          </div>


      <div id="subcatdetail">
        <h3>1e infofiche over {{subCat}} {{subKey}} </h3>
        <h3>2e infofiche over {{subCat}} </h3>
        <h3>3e infofiche over {{subCat}} </h3>
        <h3>4e infofiche over {{subCat}} </h3>
        <h3>5e infofiche over {{subCat}} </h3>
      </div>

        </section>
      </core-animated-pages>

      </div> 

  </template>
  <script>
    (function () {
      'use strict';

      var subKey = '';

      Polymer({
        // define element prototype here
        ready: function(){

          var that = this;

          this.subKey = subKey;
          this.$.catselector.addEventListener('core-activate', function(e){
            that.subCat = this.selected;
            that.subKey = e.detail.item.attributes[1].value;
            console.log(that.subKey);
          });

        },

      openAddSubCat: function(){
        this.$.suboverlay.toggle();
      },


      toNext: function(){
        this.$.subcatscenes.selected = 0;
        this.fire('menureset');
      },

      toCatMenu: function(){
        this.$.subcatscenes.selected = 0;
        this.$.catselector.selected = '';
      },

      cattapped: function(){
        if(window.innerWidth < 401){
          this.$.subcatscenes.selected = 1;
        };
        }
      });

    })();
  </script>
</polymer-element>
