<link rel="import" href="../../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../../bower_components/firebase-element/firebase-element.html">
<link rel="import" href="../../../../bower_components/core-animated-pages/transitions/slide-from-right.html">
<link rel="import" href="../../../../bower_components/core-animated-pages/core-animated-pages.html">

<polymer-element name="aos-infoleftmenu" attributes="selectedCat selectedTitle">
  <template>
    <link rel="stylesheet" href="aos-infoleftmenu.css">
      <div id="leftmenu">
        <firebase-element location="https://blazing-fire-6426.firebaseio.com/infocenter/{{selectedCat}}/subcategories/" data="{{subdata}}" keys="{{subkeys}}" on-data-change="{{handleResponse}}" log></firebase-element>
              <small on-tap="{{toNext}}"> naar overzicht</small>

        <h2>{{selectedTitle}}</h2>

        <core-animated-pages id="subcatscenes" transitions="slide-from-right">
        <section>
        <core-selector id="catselector" selected="{{selected}}" valueattr="label" on-core-select="{{cattapped}}">
        <template repeat="{{sk in subkeys}}">
          <div label="{{subdata[sk].subtitel}}" class="subcats"> {{subdata[sk].subtitel}}</div>
        </template>
        </core-selector>
          <template bind>
          <div vertical layout center class="addbtn" on-tap="{{openAddSubCat}}"><h4>Een subcategorie toevoegen</h4></div>
          <core-overlay layered backdrop id="suboverlay">
          <aos-addinfosub selectedCat="{{selectedCat}}"></aos-addinfosub>
          </core-overlay>
        </template>
        </section>
        <section>
          <div id="subcat">{{subCat}}</div>
        </section>


      </core-animated-pages>
      </div> 
  </template>
  <script>
    (function () {
      'use strict';

      Polymer({
        // define element prototype here
        ready: function(){
          // this.$.subcatscenes.selected = 0;
          var that = this;


        this.$.catselector.addEventListener('core-select', function(e){
            that.subCat = this.selected;
            console.log('Dit is de aangeklikte subcat:', that.subCat);

          });

        },

      toNext: function(){
        this.subCat = '';
        this.$.subcatscenes.selected = 0;
        this.$.catselector.selected = '';


        this.fire('menureset');
        // this.$.catselector.selected = -1;
        console.log('Leeggemaakte subcat:', this.subCat);
        // console.log('catselector terug op niks:', this.$.catselector.selected);

      },

        cattapped: function(){
          this.$.subcatscenes.selected = 1;


          // this.subCat = this.$.catselector.selected;
          // console.log(this.subCat);

        }
      });

    })();
  </script>
</polymer-element>
